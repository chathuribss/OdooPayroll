<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_payslip" inherit_id="hr_payroll.report_payslip">
        <xpath expr="//div[@class='page']" position="replace">
            <div class="page">
                <h3 id="payslip_name"><span t-field="o.name"/></h3>
                <table class="table table-sm table-bordered">
                    <thead>
                        <!--                        <tr>-->
                        <!--                            <th colspan="2" style="text-align:center; background-color: #B0B6CB; font-size: 16px; font-weight: bold; color: #FFFFFF;">Supplier Details</th>-->
                        <!--                        </tr>-->
                        <!--                        <tr>-->
                        <!--                            <th colspan="2" style="font-weight: bold; font-size: 16px"><span t-field="doc.supplier_name.name"/></th>-->
                        <!--                        </tr>-->
                        <tr style="text-align:left;">
                            <th style="font-size: 18px; font-weight: bold;">Employee</th>
                            <th><span t-field="o.employee_id"/></th>
                        </tr>
                        <tr style="text-align:left;">
                            <th style="font-size: 18px; font-weight: bold;">Department</th>
                            <th><span t-field="o.employee_id.department_id.name"/></th>
                        </tr>
                        <tr style="text-align:left;">
                            <th style="font-size: 18px; font-weight: bold;">Designation</th>
                            <th><span t-field="o.employee_id.job_id"/></th>
                        </tr>
                        <tr style="text-align:left;">
                            <th style="font-size: 18px; font-weight: bold;">Period</th>
                            <th>
                                <span t-field="o.date_from">From</span>
                                <sapn> To </sapn>
                                <span t-field="o.date_to">To</span></th>
                        </tr>
                    </thead>
                </table>
                <table class="table table-sm">
                    <thead class="o_black_border">
                        <tr>
                            <th id="line_header_name" style="text-align:left;">Description</th>
                            <th id="line_header_hours" style="text-align:right;">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Basic')" t-as="basic">
                            <tr>
                                <td style="font-size: 18px; font-weight: bold; color: #199A13">
                                    <span>Basic Salary</span>
                                </td>

                                <td style="font-size: 18px; font-weight: bold; color: #199A13" id="payslip_line_total" class="text-end"><span t-esc="basic.total"
                                                                                                                                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                                                                                                                                              t-att-style="'color:#875A7B;' if basic.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>

                        <tr>
                            <td colspan="2"></td>
                        </tr>
                        <tr>
                            <td style="font-size: 18px; font-weight: bold; background-color: #B0B6CB;" colspan="2"><span style="font-size: 18px; font-weight: bold; background-color: #B0B6CB;">Allowances</span></td>
                        </tr>

                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Allowance')" t-as="alw">
                            <t t-set="line_styling" t-value="alw.get_payslip_styling_dict()"/>
                            <t t-set="line_style"/>
                            <t t-set="line_class"/>

                            <t t-if="alw.code in line_styling">
                                <t t-set="line_style" t-value="line_styling[alw.code]['line_style']"/>
                                <t t-set="line_class" t-value="line_styling[alw.code]['line_class']"/>
                            </t>
                            <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                <td id="payslip_line_name"><span t-field="alw.name"/></td>
                                <td id="payslip_line_total" class="text-end"><span t-esc="alw.total"
                                                                                   t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                                                                                   t-att-style="'color:#875A7B;' if alw.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>
                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Gross Salary')" t-as="gross">
                            <tr>
                                <td style="font-size: 18px; font-weight: bold; color: #00A09D">
                                    <span>Gross Salary</span>
                                </td>

                                <td style="font-size: 18px; font-weight: bold; color: #00A09D" id="payslip_line_total" class="text-end"><span t-esc="gross.total"
                                                                                                                                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}' t-att-style="'color:#00A09D;' if gross.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>
                         <tr>
                            <td colspan="2"></td>
                        </tr>
                        <tr>
                            <td style="font-size: 18px; font-weight: bold; background-color: #B0B6CB;" colspan="2"><span style="font-size: 18px; font-weight: bold; background-color: #B0B6CB;">Deductions</span></td>
                        </tr>

                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Deduction')" t-as="line">
                            <t t-set="line_styling" t-value="line.get_payslip_styling_dict()"/>
                            <t t-set="line_style"/>
                            <t t-set="line_class"/>

                            <t t-if="line.code in line_styling">
                                <t t-set="line_style" t-value="line_styling[line.code]['line_style']"/>
                                <t t-set="line_class" t-value="line_styling[line.code]['line_class']"/>
                            </t>
                            <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                <td id="payslip_line_name"><span t-field="line.name"/></td>
                                <td id="payslip_line_total" class="text-end"><span t-esc="line.total"
                                                                                   t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                                                                                   t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>

                         <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'TDS')" t-as="TDS">
                            <tr>
                                <td style="font-size: 18px; font-weight: bold; color: #00A09D">
                                    <span>Total Deductions</span>
                                </td>

                                <td style="font-size: 18px; font-weight: bold; color: #199A13" id="payslip_line_total" class="text-end"><span t-esc="TDS.total"
                                                                                                                                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                                                                                                                                              t-att-style="'color:#00A09D;' if basic.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>

                         <tr>
                            <td colspan="2"></td>
                        </tr>

                        <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Net')" t-as="net">
                            <tr>
                                <td style="font-size: 18px; font-weight: bold; color: #3E0B0B">
                                    <span>Net Salary</span>
                                </td>

                                <td style="font-size: 18px; font-weight: bold; color: #3E0B0B" id="payslip_line_total" class="text-end"><span t-esc="net.total"
                                                                                                                                              t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'
                                                                                                                                              t-att-style="'color:#3E0B0B;' if net.total &lt; 0 else ''"/></td>
                            </tr>
                        </span>
                    </tbody>
                </table>

                <p><h5 style="text-align:center;"><i>"Your Dedication, Our Appreciation"</i></h5></p>


            </div>
        </xpath>
    </template>

</odoo>
