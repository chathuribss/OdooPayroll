<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_payslip" inherit_id="hr_payroll.report_payslip">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.basic_layout">


                <div class="header">
                    <div class="row">
                        <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" width="80px" style="max-height: 100px; padding-left:10px" alt="Logo"/>
                    </div>
                    <div class="oe_structure"/>
                </div>
                <div class="footer">
                    <h6 style="text-align:center;"><i>"Your Dedication, Our Appreciation"</i></h6>
                    <h6 style="text-align:center;"><i>-This is a computer-generated payslip and does not require a signature-</i></h6>
                </div>
                <div class="page">
                    <h5>PBSS Group</h5>
                    <h6>PBSS Tower No, 233 Biyagama Rd, Kelaniya 11300</h6>
                    <h5 id="payslip_name"><span t-field="o.name"/></h5>
                    <table class="table table-sm table-bordered">
                        <thead>
                            <!--                        <tr>-->
                            <!--                            <th colspan="2" style="text-align:center; background-color: #B0B6CB; font-size: 16px; font-weight: bold; color: #FFFFFF;">Supplier Details</th>-->
                            <!--                        </tr>-->
                            <!--                        <tr>-->
                            <!--                            <th colspan="2" style="font-weight: bold; font-size: 16px"><span t-field="o.supplier_name.name"/></th>-->
                            <!--                        </tr>-->
                            <tr style="text-align:left;">
                                <th style="font-size: 14px; font-weight: bold;">Employee No</th>
                                <th style="font-size: 14px;"><span t-field="o.employee_id.barcode"/></th>
                            </tr>
                            <tr style="text-align:left;">
                                <th style="font-size: 14px; font-weight: bold;">Department</th>
                                <th style="font-size: 14px;"><span t-field="o.employee_id.department_id.name"/></th>
                            </tr>
                            <tr style="text-align:left;">
                                <th style="font-size: 14px; font-weight: bold;">Designation</th>
                                <th style="font-size: 14px;"><span t-field="o.employee_id.job_id"/></th>
                            </tr>
                            <tr style="text-align:left;">
                                <th style="font-size: 14px; font-weight: bold;">Period</th>
                                <th style="font-size: 14px;">
                                    <span t-field="o.date_from">From</span>
                                    <sapn> To </sapn>
                                    <span t-field="o.date_to">To</span></th>
                            </tr>
                        </thead>
                    </table>
                    <table class="table table-sm" style="max-width: 10px;">
                        <thead class="o_black_border">
                            <tr>
                                <th id="line_header_name" style="text-align:left;">Description</th>
                                <th id="line_header_hours" style="text-align:right;">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Basic')" t-as="basic">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #199A13">
                                        <span>Basic Salary</span>
                                    </td>

                                    <td style="font-size: 14px; font-weight: bold; color: #199A13" id="payslip_line_total" class="text-end"><span t-esc="basic.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if basic.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <!--<tr>-->
                            <!--    <td colspan="2"/>-->
                            <!--</tr>-->
                            <tr>
                                <td style="font-size: 14px; font-weight: bold; background-color: #B0B6CB;" colspan="2"><span style="font-size: 16px; font-weight: bold; background-color: #B0B6CB;">Allowances</span></td>
                            </tr>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Allowance')" t-as="alw">
                                <t t-set="line_styling" t-value="alw.get_payslip_styling_dict()"/>
                                <t t-set="line_style"/>
                                <t t-set="line_class"/>

                                <t t-if="alw.code in line_styling">
                                    <t t-set="line_style" t-value="line_styling[alw.code]['line_style']"/>
                                    <t t-set="line_class" t-value="line_styling[alw.code]['line_class']"/>
                                </t>
                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="alw.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="alw.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if alw.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>
                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Basic Allowance')" t-as="basic">
                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="basic.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="basic.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if basic.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'PBSSALW')" t-as="alw">

                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="alw.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="alw.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if alw.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Gross Salary')" t-as="gross">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #00A09D">
                                        <span>Gross Salary</span>
                                    </td>

                                    <td style="font-size: 14px; font-weight: bold; color: #00A09D" id="payslip_line_total" class="text-end"><span t-esc="gross.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#00A09D;' if gross.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Gross Allowance')" t-as="gross">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #00A09D">
                                        <span>Gross Allowance</span>
                                    </td>
                                    <td style="font-size: 14px; font-weight: bold; color: #00A09D" id="payslip_line_total" class="text-end"><span t-esc="gross.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#00A09D;' if gross.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>
                            <!--<tr>-->
                            <!--    <td colspan="2"/>-->
                            <!--</tr>-->
                            <tr>
                                <td style="font-size: 14px; font-weight: bold; background-color: #B0B6CB;" colspan="2"><span style="font-size: 16px; font-weight: bold; background-color: #B0B6CB;">Deductions</span></td>
                            </tr>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Deduction')" t-as="line">
                                <t t-set="line_styling" t-value="line.get_payslip_styling_dict()"/>
                                <t t-set="line_style"/>
                                <t t-set="line_class"/>

                                <t t-if="line.code in line_styling">
                                    <t t-set="line_style" t-value="line_styling[line.code]['line_style']"/>
                                    <t t-set="line_class" t-value="line_styling[line.code]['line_class']"/>
                                </t>
                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="line.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="line.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if line.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'TDS')" t-as="TDS">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #00A09D">
                                        <span>Total Deductions</span>
                                    </td>

                                    <td style="font-size: 14px; font-weight: bold; color: #199A13" id="payslip_line_total" class="text-end"><span t-esc="TDS.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#00A09D;' if TDS.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <!--<tr>-->
                            <!--    <td colspan="2"/>-->
                            <!--</tr>-->

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Net')" t-as="net">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #3E0B0B">
                                        <span>Net Salary</span>
                                    </td>
                                    <td style="font-size: 14px; font-weight: bold; color: #3E0B0B" id="payslip_line_total" class="text-end"><span t-esc="net.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#3E0B0B;' if net.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'Net Allowance')" t-as="net">
                                <tr>
                                    <td style="font-size: 14px; font-weight: bold; color: #3E0B0B">
                                        <span>Net Allowance</span>
                                    </td>
                                    <td style="font-size: 16px; font-weight: bold; color: #3E0B0B" id="payslip_line_total" class="text-end"><span t-esc="net.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#3E0B0B;' if net.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                            <tr>
                                <td style="font-size: 14px; font-weight: bold; background-color: #B0B6CB;" colspan="2"><span style="font-size: 16px; font-weight: bold; background-color: #B0B6CB;">Company Contribution</span></td>
                            </tr>

                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'EPF 12%')" t-as="com">
                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="com.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="com.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if com.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>
                            <span t-foreach="o.line_ids.filtered(lambda line: line.appears_on_payslip and line.category_id.name == 'ETF 3%')" t-as="etf">
                                <tr t-att-class="line_class" t-att-style="line_style" id="line_display">
                                    <td id="payslip_line_name" style="font-size: 14px;"><span t-field="etf.name"/></td>
                                    <td id="payslip_line_total" style="font-size: 14px;" class="text-end"><span t-esc="etf.total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.company_id.currency_id}" t-att-style="'color:#875A7B;' if etf.total &lt; 0 else ''"/></td>
                                </tr>
                            </span>

                        </tbody>
                    </table>

                    <!--<span><strong style="text-align:center;"><i>"Your Dedication, Our Appreciation"</i></strong></span>-->
                    <!--<span><strong style="text-align:center;font-size: 14px;"><i>"This is a computer-generated payslip and does not require a signature"</i></strong></span>-->

                </div>
            </t>
        </xpath>
    </template>

</odoo>
